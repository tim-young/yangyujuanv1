package com.yangyujuan.jdbc.dao;

import java.util.ArrayList;
import java.util.Date;

import com.yangyujuan.jdbc.dao.factory.NewsDaoFactory;
import com.yangyujuan.jdbc.dao.factory.ProcessorDaoFactory;
import com.yangyujuan.jdbc.dao.factory.UserDaoFactory;
import com.yangyujuan.jdbc.domain.News;
import com.yangyujuan.jdbc.domain.Processor;
import com.yangyujuan.jdbc.domain.User;
import com.yangyujuan.spider.NewsSpider;
import com.yangyujuan.spider.processor.NewsProcesser;

public class NewsDaoTest {
	public static void main(String[] args) {
//		NewsDao newsDao = NewsDaoFactory.getInstance().getUserDao();
//		ArrayList<News> list = newsDao.getNewsList(45);
//		int i = 0;
//		for(News news : list){
//			System.out.println("##########################"+ i++);
//			System.out.println(news);
//		}
		// UserDao userDao = new UserDaoJdbcImpl();
		// System.out.println(userDao);
		//		
//		News news = new News();
//		 news.setBodytext("bodytest杨");
//	        news.setPubTime("2015-07-12");
//	        news.setSource("yangding杨");
//	        news.setTitle("biaoti");
//	        news.setVisits(100);
//		 news.setBodytext("这些举措不可能凭空发生例如任何程度的变化都会遏制");
//	        news.setPubTime("2015年08月29日 07:10");
//	        news.setSource("凤凰国际iMarkets");
//	        news.setTitle("这些举措不可能凭空发生");
//		news.setPubTime(new java.sql.Date(new Date().getTime()));
		
//		newsDao.addNews(news);
//		System.out.println(newsDao.getNews(1));
		

		// userDao.addUser(user);
		// System.out.println(user.getId());

//		User u = userDao.findUser(user.getName(), null);
//		System.out.println(u.getId());
//
//		u = userDao.getUser(1);
//		u.setMoney(20000.1f);
//		userDao.update(u);

		// User u1 = userDao.getUser(8);
		// userDao.delete(u1);

		// UserDaoImpl udi = new UserDaoImpl();
		// User u1 = udi.findUser(user.getName(), null);
		
//		UserDao dao = UserDaoFactory.getInstance().getUserDao();
// 		User user = dao.getByName("admin");
// 		String pas = dao.getPasswordByName("admin");
//		User user = dao.getById(1);
// 		System.out.println(pas);
		
		ProcessorDao dao = ProcessorDaoFactory.getInstance().getDao();
		Processor bean = new Processor();
		bean.setDomain("finance.ifeng.com");
		bean.setSitename("凤凰财经网");
		bean.setLinkstr("http://finance\\.ifeng\\.com/a/\\d{8}/\\d+_\\d+\\.shtml");
		bean.setPubtimestr("//span[@class='ss01']/text()");
		bean.setSourcestr("//span[@class='ss03']/text()");
		bean.setTitlestr("//title/text()");
		bean.setBodytextstr("//div[@class='js_selection_area']");
		bean.setStarturl("http://finance.ifeng.com/cmppdyn/756/665/1/dynlist.html");
		
//		bean.setDomain("finance.sina.com.cn");
//		bean.setSitename("新浪财经网");
//		bean.setLinkstr("http://roll\\.finance\\.sina\\.com\\.cn/finance/\\S{4}/\\S{4}/^[a-zA-Z0-9_]{1,}$.shtml");
//		bean.setPubtimestr("//span[@class='pubTime article-time']/text()");
//		bean.setSourcestr("//span[@class='where color-a-1']/a/text()");
//		bean.setTitlestr("//title/text()");
//		bean.setBodytextstr("//div[@id='Cnt-Main-Article-QQ']");
//		bean.setStarturl("http://roll.finance.sina.com.cn/finance/gjcj/gjjj/index.shtml");
		
//		bean.setDomain("finance.qq.com");
//		bean.setSitename("腾讯财经网");
//		bean.setLinkstr("/a/\\d{8}/\\d+\\.htm");
//		bean.setPubtimestr("//span[@class='pubTime article-time']/text()");
//		bean.setSourcestr("//span[@class='where color-a-1']/a/text()");
//		bean.setTitlestr("//title/text()");
//		bean.setBodytextstr("//div[@id='Cnt-Main-Article-QQ']");
//		bean.setStarturl("http://finance.qq.com/gdyw.htm");
		
		
//		bean.setDomain("money.163.com");
//		bean.setSitename("网易财经网");
//		bean.setLinkstr("http://money\\.163\\.com/15/\\d{4}/\\d{2}/\\S{16}\\.html");
//		bean.setPubtimestr("//div[@class='ep-time-soure cDGray']/text()");
//		bean.setSourcestr("//a[@id='ne_article_source']/text()");
//		bean.setTitlestr("//title/text()");
//		bean.setBodytextstr("//div[@id='endText']");
//		bean.setStarturl("http://money.163.com/special/00252G50/macro.html");
		
//		dao.add(bean);
		
		NewsSpider spider = new NewsSpider();
		spider.startSpider(bean);

	}
}



