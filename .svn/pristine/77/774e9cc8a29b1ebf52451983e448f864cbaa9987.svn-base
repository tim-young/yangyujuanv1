<%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="s" uri="/struts-tags"%>
<!doctype html>
	<link href="../js/umeditor/themes/default/css/umeditor.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="../js/umeditor/third-party/jquery.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="../js/umeditor/umeditor.config.js"></script>
    <script type="text/javascript" charset="utf-8" src="../js/umeditor/umeditor.min.js"></script>
    <script type="text/javascript" src="../js/umeditor/lang/zh-cn/zh-cn.js"></script>
<html>
	<jsp:include page="include.jsp"></jsp:include>
<body class="night3">
    <jsp:include page="header.jsp"></jsp:include>
    
    <div id="container" class="bg-white clearfix">
    
        <div class="container-main">
         		<script type="text/plain" id="myEditor" style="width:1000px;height:240px;">
    				<p>这里我可以写一些输入提示</p>
				</script>
           <div class="article-detail">
          
               <div class="title">
                   <h1 id="h1">
                   	  	<s:property value="#news.title"/>
                   </h1>
                   <div class="subtitle clearfix">
                        <span class="src" id="source">
                        	<s:property value="#news.source"/>
                        </span>
                        <span class="time" id="time">
                        	<s:property value="#news.pubTime"/>
                        </span>
                   </div>
               </div>
               <div class="article-content" id="bodytext">
               		<s:property value="#news.bodytext" escape="false"/>
               </div>
           </div>   
</div>

    <jsp:include page="footer.jsp"></jsp:include>
    <script type="text/javascript">
    var um = UM.getEditor('myEditor');
    um.addListener('blur',function(){
        $('#focush2').html('编辑器失去焦点了')
    });
    um.addListener('focus',function(){
        $('#focush2').html('')
    });
    
    setContent('hahah');
    //按钮的操作
    function insertHtml() {
        var value = prompt('插入html代码', '');
        um.execCommand('insertHtml', value)
    }
    function isFocus(){
        alert(um.isFocus())
    }
    function doBlur(){
        um.blur()
    }
    function createEditor() {
        enableBtn();
        um = UM.getEditor('myEditor');
    }
    function getAllHtml() {
        alert(UM.getEditor('myEditor').getAllHtml())
    }
    function getContent() {
        var arr = [];
        arr.push("使用editor.getContent()方法可以获得编辑器的内容");
        arr.push("内容为：");
        arr.push(UM.getEditor('myEditor').getContent());
        alert(arr.join("\n"));
    }
    function getPlainTxt() {
        var arr = [];
        arr.push("使用editor.getPlainTxt()方法可以获得编辑器的带格式的纯文本内容");
        arr.push("内容为：");
        arr.push(UM.getEditor('myEditor').getPlainTxt());
        alert(arr.join('\n'))
    }
    function setContent(isAppendTo) {
        var arr = [];
        arr.push("使用editor.setContent('欢迎使用umeditor')方法可以设置编辑器的内容");
        var bodytext = $("#bodytext").html();
        UM.getEditor('myEditor').setContent(bodytext, isAppendTo);
        alert(arr.join("\n"));
    }
    function setDisabled() {
        UM.getEditor('myEditor').setDisabled('fullscreen');
        disableBtn("enable");
    }

    function setEnabled() {
        UM.getEditor('myEditor').setEnabled();
        enableBtn();
    }

    function getText() {
        //当你点击按钮时编辑区域已经失去了焦点，如果直接用getText将不会得到内容，所以要在选回来，然后取得内容
        var range = UM.getEditor('myEditor').selection.getRange();
        range.select();
        var txt = UM.getEditor('myEditor').selection.getText();
        alert(txt)
    }

    function getContentTxt() {
        var arr = [];
        arr.push("使用editor.getContentTxt()方法可以获得编辑器的纯文本内容");
        arr.push("编辑器的纯文本内容为：");
        arr.push(UM.getEditor('myEditor').getContentTxt());
        alert(arr.join("\n"));
    }
    function hasContent() {
        var arr = [];
        arr.push("使用editor.hasContents()方法判断编辑器里是否有内容");
        arr.push("判断结果为：");
        arr.push(UM.getEditor('myEditor').hasContents());
        alert(arr.join("\n"));
    }
    function setFocus() {
        UM.getEditor('myEditor').focus();
    }
    function deleteEditor() {
        disableBtn();
        UM.getEditor('myEditor').destroy();
    }
    function disableBtn(str) {
        var div = document.getElementById('btns');
        var btns = domUtils.getElementsByTagName(div, "button");
        for (var i = 0, btn; btn = btns[i++];) {
            if (btn.id == str) {
                domUtils.removeAttributes(btn, ["disabled"]);
            } else {
                btn.setAttribute("disabled", "true");
            }
        }
    }
    function enableBtn() {
        var div = document.getElementById('btns');
        var btns = domUtils.getElementsByTagName(div, "button");
        for (var i = 0, btn; btn = btns[i++];) {
            domUtils.removeAttributes(btn, ["disabled"]);
        }
    }
    </script>
    
    <script>
        window.scrollTo(0, 0);
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-28423340-5']);
        _gaq.push(['_trackPageview']);
        _gaq.push(['_addOrganic','baidu','wd',true]);
        _gaq.push(['_addOrganic','image.baidu','word',true]);
        _gaq.push(['_addOrganic','pic.baidu','word',true]);
        _gaq.push(['_addOrganic','haosou','q',true]);
        _gaq.push(['_addOrganic','so','q',true]);
        _gaq.push(['_addOrganic','sogou','query',true]);
        _gaq.push(['_addOrganic','google','q',true]);
        _gaq.push(['_addOrganic','bing','q',true]);
        _gaq.push(['_addOrganic','youdao','q',true]);
    
        window.gaqpush = function (ga_event, ga_label){
            _gaq.push(['_trackEvent', 'event', ga_event, ga_label, 1]);
        };

        (function() {
            var ga = document.createElement('script');
            ga.type = 'text/javascript'; 
            ga.src = 'http://www.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; 
            s.parentNode.insertBefore(ga, s);
         })();

        $("body").on('click', '[ga_event]', function(e){
             var $this =  $(this);
             var ga_category = $this.attr('ga_category') || '/group/?type=article&amp;tag=news_finance';
             var ga_event = $this.attr('ga_event');
             var ga_label = $this.attr('ga_label');
             var ga_value = $this.attr('ga_value')||1;
             if(ga_category != '/') {
                _gaq.push(['_trackEvent', ga_category, ga_event, ga_label, ga_value]);   
             }
        });

        $.ajaxSetup({
            cache: false,
            dataType: 'json',
            beforeSend: function(xhr, settings) {
                if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
                    // Only send the token to relative URLs i.e. locally.
                    xhr.setRequestHeader("X-CSRFToken", $.cookie('csrftoken'));
                }
            },
            dataFilter: function(data, type) {
                try{
                    data = data.replace(/"group_id": (\d+)/g, function(str, p, offset, s) {
                        var items = str.split(':');
                        items[1] = '"'+$.trim(items[1])+'"';
                        str = items.join(':');
                        return str;
                    });
                }catch(e){}
                return data;
            }
        });
        $(function(){
            if(document.referrer && document.referrer.indexOf("toutiao.org")>-1) {
                if(window.location.host != "toutiao.org"){
                    window.location.host = "toutiao.org";
                }
            }
        });
    </script>
    
    <script type="text/javascript" src="//s2.pstatp.com/resource/toutiao_web/static/pkg/newindex_84b6a1a.js"></script>
<script type="text/javascript" src="//s2.pstatp.com/resource/toutiao_web/static/pkg/core_d0cc667.js"></script>
<script type="text/javascript" src="//s2.pstatp.com/resource/toutiao_web/static/pkg/detail_d9a48a7.js"></script>

    <script>
        /*jshint ignore:start*/
        require('pagelet/nav/nav.js').create({
            'type': 'home'
        });
        require('pagelet/detailbar/detailbar.js').create({});

        
         
        require('pagelet/comment/comment.js').create({});
        require('pagelet/navline/nav_line.js').create({});

        /*jshint ignore:end*/
    </script>

</body>
</html>
