package com.yangyujuan.interceptor;

import java.util.Map;

import com.opensymphony.xwork2.Action;
import com.opensymphony.xwork2.ActionContext;
import com.opensymphony.xwork2.ActionInvocation;
import com.opensymphony.xwork2.interceptor.AbstractInterceptor;
import com.yangyujuan.jdbc.domain.User;

public class LoginInterceptor extends AbstractInterceptor{

	//拦截器名称
	private String name;

	public String getName() {
		return name;
	}

	public void setName(String name) {
		this.name = name;
	}

	@Override
	public String intercept(ActionInvocation invocation) throws Exception {
		ActionContext context = invocation.getInvocationContext();
		Map<String, Object> session = context.getSession();
		User user = (User) session.get("user");
		if(user!=null&&user.getUsername().equals("admin")&&user.getPassword().equals("admin")){
			return invocation.invoke();
		}
		return Action.ERROR;
	}
	
	
	
}
